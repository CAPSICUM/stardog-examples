apply plugin: 'java'

if (!project.hasProperty('stardogRepo')) {
	throw new InvalidUserDataException("Url to Stardog repository is not defined." +
									   " Set up the property 'stardogRepo' in gradle.properties.")
}

task wrapper(type: Wrapper) {
	gradleVersion = '2.2'
}

ext {
	stardogVersion = '3.0'
	projectVersion = '0.0.1'
	distPath = "${projectDir}/dist"
	stardogRepo= "http://maven.stardog.com"
}

allprojects {
	apply plugin: 'idea'
	group = 'com.complexible.stardog'
	version = projectVersion
	// also configure in idea.gradle
	sourceCompatibility = '1.6'
	targetCompatibility = '1.6'

	repositories {
		maven {
			url stardogRepo
		}
		mavenCentral()
	}
}

subprojects {
	apply plugin: "java"

	// common deps
	dependencies {
		compile 'org.slf4j:slf4j-api:1.7.7'
		compile 'org.slf4j:slf4j-jdk14:1.7.7'

		testCompile 'junit:junit:4.8.2'
	}

	sourceSets {
		main {
			java {
				srcDir 'main/src'
			}
			resources {
				srcDir 'main/resources'
			}
		}
		test {
			java {
				srcDir 'test/src'
			}
			resources {
				srcDir 'test/resources'
			}
		}
	}
}
